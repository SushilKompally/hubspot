version: 2

models:
  - name: dim_pipeline_stage
    description: >
      Deal Pipeline Stage dimension for HubSpot. Stores unique pipeline stage
      definitions (stage id, label, pipeline id, probability) as a Typeâ€‘1 dimension.

    config:
      contract:
        enforced: true

    columns:
      - name: hs_stage_id
        description: "Natural key of the pipeline stage in HubSpot."
        data_type: varchar
        tests:
          - not_null
          - unique

      - name: label
        description: "Stage label/name (e.g., Prospecting, Closed Won)."
        data_type: varchar

      - name: pipeline_id
        description: "Pipeline ID this stage belongs to."
        data_type: varchar

      # - name: probability
      #   description: "Win probability percentage assigned to this stage."
      #   data_type: number

      - name: gold_load_date
        description: "Timestamp when this record was loaded into the gold layer."
        data_type: timestamp_ltz

      - name: last_modified_date
        description: "Coalesced source timestamp used for incremental merge filtering."
        data_type: timestamp_ntz